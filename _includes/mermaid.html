<script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'default',
      securityLevel: 'loose',
      flowchart: {
        useMaxWidth: false,
        htmlLabels: true
      }
    });
    
    // Find all code blocks with class mermaid
    var mermaidElements = document.querySelectorAll('code.language-mermaid');
    mermaidElements.forEach(function(element) {
      try {
        // Get the content of the code block
        var content = element.textContent;
        // Create a new div for mermaid
        var mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = content;
        // Replace the code block with the new div
        element.parentNode.replaceChild(mermaidDiv, element);
        // Render the diagram
        mermaid.init(undefined, mermaidDiv);
      } catch (e) {
        console.error('Mermaid rendering error:', e);
      }
    });
  });
</script> 