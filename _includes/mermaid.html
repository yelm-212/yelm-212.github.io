<script src="https://cdn.jsdelivr.net/npm/mermaid@9.4.3/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
      startOnLoad: false,
      theme: 'default',
      securityLevel: 'loose'
    });

    // Find all code blocks with class mermaid
    var mermaidElements = document.querySelectorAll('code.language-mermaid');
    mermaidElements.forEach(function(element) {
      try {
        // Get the content of the code block
        var content = element.textContent;
        // Create a new div for mermaid
        var mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = content;
        // Replace the code block with the new div
        element.parentNode.replaceChild(mermaidDiv, element);
      } catch (e) {
        console.error('Mermaid initialization error:', e);
      }
    });

    // Render all mermaid diagrams
    mermaid.init(undefined, '.mermaid');
  });
</script> 